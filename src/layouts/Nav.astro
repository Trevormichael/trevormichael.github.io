---
const pathname = new URL(Astro.request.url).pathname;
const current = pathname.slice(1); // remove the first "/"

const navItems = [
  { name: "About", path: "about" },
  { name: "Skills", path: "skills" },
  { name: "Projects", path: "projects" },
  { name: "Contact", path: "contact" },
];
---

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const sections = document.querySelectorAll('h1[id]');
        const navLinks = document.querySelectorAll('.toc-link');

        const observerOptions = {
            rootMargin: '200% 0px -90% 0px',
            threshold: 0.1
        };

        const observerCallback = (entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    navLinks.forEach(link => {
                        let href = link.getAttribute('href')
                        if (href && href.slice(1) === entry.target.id) {
                            link.classList.add('active');
                        } else {
                            link.classList.remove('active');
                        }
                    });
                }
            });
        };

        const observer = new IntersectionObserver(observerCallback, observerOptions);

        sections.forEach(section => {
            observer.observe(section);
        });
    });
</script>

<header class="pr-24 mb-10 md:mb-0 md:w-1/3 md:min-w-1/3 md:sticky md:top-0">
    <h1 class="text-xl font-bold text-stone-700"><a href="/">Trevor Michael C.</a></h1>
    <p>Developer, Designer</p>
    <p>Something else about me, blah blah blah lorem okasdj jasnd nbjsnd jdjb bjasd</p>
    <ul class="mt-8 font-light hidden md:block" role="list">
        {navItems.map((item) => (
            <a class:list={["toc-link text-stone-700 text-md", current === item.path ? "" : ""]} href={`#${item.path}`}>
                <li class="transition-all font-normal list-none py-1.5 my-1 hover:font-bold rounded-lg items-center">
                    {item.name}
                </li>
            </a>
        ))}
    </ul>
</header>

<style>
    .active > li {
        transform: translateX(8px);
        font-weight: bold;
    }
</style>